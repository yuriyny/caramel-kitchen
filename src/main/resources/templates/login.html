<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Caramel Kitchen</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>

    <!--Let browser know website is optimized for mobile-->
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0" /> -->

    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!--Import materialize.css-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

    <!--Custom stylings-->
    <link href="/css/style.css" rel="stylesheet"/>
</head>

<body th:with="reason=${session.pageType}">
<nav>
    <div class="nav-wrapper amber lighten-4">
        <a href="#" class="brand-logo" tabindex="-1"></a>
        <!--        <ul id="nav-mobile" class="right hide-on-med-and-down">-->
        <!--            <li><a href="lobby.html">Temp Access</a></li>-->
        <!--        </ul>-->
    </div>
</nav>

<div class="row" style="margin-top: 120px">
    <div id="login-page" class="col s6 offset-s2">
        <form class="login-form" th:action="@{/login}" th:object="${user}" method="POST">
            <h1>Login</h1>
            <div class="row">
                <div class="col s12" th:if="${param.error}">Invalid username and password.</div>
                <div class="col s12" th:if="${user}">
                    <p th:if="${#fields.hasErrors('username')} and ${pageType}=='login'" th:errors="*{username}"></p>
                </div>
                <div class="input-field col s12">
                    <i class="material-icons prefix">account_circle</i>
                    <input id="login_username" type="text" name="username" class="validate">
                    <label for="login_username">Username</label>
                </div>
                <div class="col s12" th:if="${user}">
                    <p th:if="${#fields.hasErrors('password')} and ${pageType}=='login'" th:errors="*{password}"></p>
                </div>
                <div class="input-field col s12">
                    <i class="material-icons prefix">lock_outline</i>
                    <input id="login_password" type="password" name="password" class="validate">
                    <label for="login_password">Password</label>
                </div>
                <div class="col s12">
                    <label>
                        <input type="checkbox"/>
                        <span>Remember me</span>
                    </label>
                </div>
                <button type="submit" class="col s12 btn-large waves-effect waves-orange orange lighten-2"
                        style="margin-top: 40px">Login
                </button>
            </div>
        </form>
        <div class="row">
            <p class="margin left"><a href="#register" class="modal-trigger">Register Now!</a></p>
            <p class="margin right medium-small"><a href="#">Forgot password?</a></p>
        </div>
    </div>

    <div class="col s2 offset-s1">
        <div class="row">
            <div id="brief-intro" class="card-panel orange lighten-2 center">
                <i class="material-icons">people</i> <!--or sentiment_very_satisfied or face-->
                <h5>Hello there!</h5>
                <p>Lorem ipsum, dolor sit amet consectetur adipisicing elit. Harum sit facere sequi veritatis magni voluptatem enim sint suscipit maxime voluptatum? Laudantium quaerat inventore, dolorem fugit fugiat nesciunt iusto eos molestias?</p>
            </div>
        </div>
    </div>
</div>

<div class="modal" id="register">
    <form th:action="@{/register}" th:object="${user}" method="POST">
        <div class="modal-footer">
            <a href="#!" class="modal-close waves-effect waves-orange btn-flat"><i
                    class="material-icons prefix">close</i></a>
        </div>
        <div class="modal-content">
            <div class="container">
                <h2 class="center">Register</h2>
                <div class="row">
                    <div class="col s12" th:if="${param.usernameError}">Username taken, try again.</div>
                    <div class="col s12" th:if="${param.registerError}">Invalid username or password.</div>

                    <div class="col s12" th:if="${user}">
                        <p th:if="${#fields.hasErrors('username')} and ${pageType}=='register'"
                           th:errors="*{username}"></p>
                    </div>

                    <div class="input-field col s12">
                        <i class="material-icons prefix">account_circle</i>
                        <input id="register_username" type="text" name="username" class="validate">
                        <label for="register_username">Username</label>
                    </div>
                    <div class="col s12" th:if="${user}">
                        <p th:if="${#fields.hasErrors('password')} and ${pageType}=='register'"
                           th:errors="*{password}"></p>
                    </div>
                    <div class="input-field col s12">
                        <i class="material-icons prefix">lock_outline</i>
                        <input id="register_password" type="password" name="password" class="validate">
                        <label for="register_password">Password</label>
                    </div>
                    <!-- <div class="input-field col s12">
                        <i class="material-icons prefix">vpn_key</i>
                        <input id="confirm_password" type="password" class="validate">
                        <label for="confirm_password">Confirm Password</label>
                    </div> -->
                    <div class="row">
                        <button type="submit" class="col s12 btn-large waves-effect waves-orange orange lighten-2" style="margin-top: 50px">Register
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>

<!--Import jQuery before materialize.js-->
<script type="text/javascript" src="/js/jquery-3.4.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        let materialize_modal = document.querySelectorAll('.modal');
        let modal = M.Modal.init(materialize_modal, {dismissible: false});
    });

</script>

</body>

</html>